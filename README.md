## API для управления складом

Для запуска приложения необходимо клонировать данный репозиторий на хост и в папке с рабочей копией создать файл с переменными среды `.env` (см. ниже).

### Запуск локально

1. Создать и активировать виртуальное окружение:

   ```
   python3 -m venv venv
   source venv/bin/activate
   ```

2. Установить зависимости: `pip install -r requirements.txt`
3. Опционально можно запустить тесты: `pytest`
4. Применить миграции: `alembic upgrade head`
5. Запустить приложение: `uvicorn app.main:app`
6. Приложение будет доступно по адресу http://127.0.0.1:8000

### Запуск в docker-контейнерах

1. Запустить контейнеры API и БД: `sudo docker compose up -d`
2. Войти в терминал контейнера API:  `docker compose exec -it api bash` и применить миграции `alembic upgrade head`. Затем выйти из терминала: `Ctrl-D`.
3. Приложение доступно по адресу http://127.0.0.1:8000

### Как заполнить файл .env

Файл `.env` должен содержать следующие переменные окружения:

- POSTGRES_DB - имя БД PostgreSQL;

- POSTGRES_USER - имя пользователя для подключения к БД PostgreSQL;

- POSTGRES_PASSWORD - пароль для подключения к БД PostgreSQL;

- DB_HOST - имя контейнера-хоста БД PostgreSQL (задайте значение: db);

- DB_PORT - порт для подключения к БД PostgreSQL;

  Файл `.env` может также содержать следующие переменные окружения:

- SQLITE_DB - путь к файлу БД Sqlite. Если эта переменная определена и не пуста, то вместо БД PostgreSQL будет использоваться БД Sqlite. Переменные среды, задающие настройки для работы с БД PostgreSQL, в этом случае игнорируются;

- APP_TITLE - наименование программы, отображаемое на странице документации API.

В корне проекта содержится файл `.env.example` - пример файла `.env`.
